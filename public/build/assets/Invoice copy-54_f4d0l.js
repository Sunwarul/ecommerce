import{_ as F}from"./AuthenticatedLayout-DJHnQnZa.js";import{n as L,f as u,g as M,I as O,o as a,w as $,b as s,t as o,e as m,c as d,d as l,a as S,u as h,W as V,F as p,i as _}from"./app-CfZqGFrz.js";import{a as T}from"./index-BP4g10d4.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-B5PF213O.js";import"./index-BV1P04VT.js";import"./index-CdUENguR.js";import"./index-yTfERYif.js";import"./index-FvJsJ9Cf.js";import"./index-B2l2iXuO.js";import"./index-QPtwLXw7.js";import"./FavIcons-BKI-ObOZ.js";const q={class:"invoice-wrap"},R={class:"invoice-actions print:hidden"},j={class:"invoice-h1"},z={class:"invoice-sub"},E={class:"font-semibold"},U={key:0,class:"badge-draft"},Y={class:"invoice-sub"},Q={class:"flex gap-2"},G={class:"print-header hidden print:block"},H={class:"print-shop-name"},J={class:"print-shop-line"},K={class:"print-shop-line"},X={class:"print-meta"},Z={class:"invoice-card"},ss={key:0,class:"draft-watermark print:block hidden"},ts={class:"invoice-head print:hidden"},os={class:"text-2xl font-bold text-slate-900"},es={class:"text-xs text-slate-500"},ns={class:"status-pill"},is={class:"text-sm font-semibold capitalize"},as={class:"invoice-grid"},ds={class:"box"},ls={class:"box-value"},rs={key:0,class:"box-sub"},cs={key:1,class:"box-sub"},us={class:"box"},ms={class:"box-sub"},vs={class:"font-medium"},hs={class:"box-sub"},ps={class:"font-medium"},_s={class:"box-sub"},bs={class:"font-medium capitalize"},xs={class:"table-wrap print:hidden"},ys={class:"invoice-table"},fs={class:"item-name"},ks={class:"item-sku"},ws={class:"r"},gs={class:"r"},Is={class:"r"},Ds={class:"r"},Ns={class:"r strong"},Ps={class:"print-items hidden print:block"},Ss={class:"print-item-top"},Ts={class:"print-item-name"},Bs={class:"print-item-amt r"},Cs={class:"print-item-sub"},As={class:"r"},Fs={class:"totals"},Ls={class:"totals-box"},Ms={class:"tot-row"},Os={class:"v"},$s={class:"tot-row"},Vs={class:"v neg"},Ws={class:"tot-row"},qs={class:"v"},Rs={class:"tot-row big"},js={class:"v"},zs={class:"tot-row"},Es={class:"v"},Us={key:0,class:"tot-row"},Ys={class:"v"},Qs={key:1,class:"tot-row"},Gs={class:"v due"},Hs={key:1,class:"payments"},Js={class:"pay-list"},Ks={class:"font-semibold"},Xs={__name:"Invoice copy",props:{order:{type:Object,required:!0},shop:{type:Object,default:()=>({name:"Your Shop Name",address:"Your Address",phone:"0123456789"})}},setup(e){const c=e;L();const i=r=>Number(r||0).toFixed(2),B=u(()=>(c.order.payments||[]).reduce((r,t)=>r+Number(t.amount||0),0)),v=u(()=>Number(c.order.paid_amount??B.value)),b=u(()=>Math.max(0,Number(c.order.total_amount||0)-v.value)),x=u(()=>Math.max(0,v.value-Number(c.order.total_amount||0))),C=u(()=>c.order.status==="draft"?"Draft Invoice":"Invoice");function A(){window.print()}return M(()=>{new URLSearchParams(window.location.search).get("autoprint")==="1"&&setTimeout(()=>window.print(),250)}),(r,t)=>(a(),O(F,null,{default:$(()=>{var y,f,k,w,g,I,D,N;return[s("div",q,[s("div",R,[s("div",null,[s("h1",j,o(C.value),1),s("p",z,[t[1]||(t[1]=m(" Invoice No: ")),s("span",E,o(e.order.invoice_no||`#${e.order.id}`),1),e.order.status==="draft"?(a(),d("span",U,"DRAFT")):l("",!0)]),s("p",Y,"Date: "+o(new Date(e.order.created_at).toLocaleString()),1)]),s("div",Q,[S(h(T),{label:"Back to POS",icon:"pi pi-arrow-left",severity:"secondary",onClick:t[0]||(t[0]=n=>h(V).visit(r.route("pos.orders.index")))}),S(h(T),{label:"Print",icon:"pi pi-print",severity:"success",onClick:A})])]),s("div",G,[s("div",H,o(e.shop.name),1),s("div",J,o(e.shop.address),1),s("div",K,"Phone: "+o(e.shop.phone),1),t[2]||(t[2]=s("div",{class:"print-sep"},null,-1)),s("div",X,[s("div",null,"Invoice: "+o(e.order.invoice_no||`#${e.order.id}`),1),s("div",null,"Date: "+o(new Date(e.order.created_at).toLocaleString()),1),s("div",null,"Cashier: "+o(((y=e.order.user)==null?void 0:y.name)||"—"),1),s("div",null,"Branch: "+o(((f=e.order.branch)==null?void 0:f.name)||"—"),1)]),t[3]||(t[3]=s("div",{class:"print-sep"},null,-1))]),s("div",Z,[e.order.status==="draft"?(a(),d("div",ss," DRAFT ")):l("",!0),s("div",ts,[s("div",null,[t[4]||(t[4]=s("div",{class:"text-sm text-slate-500"},"Invoice",-1)),s("div",os,o(e.order.invoice_no||`#${e.order.id}`),1),s("div",es,o(new Date(e.order.created_at).toLocaleString()),1)]),s("div",ns,[t[5]||(t[5]=s("span",{class:"text-xs text-slate-500"},"Payment",-1)),s("span",is,o(e.order.payment_status),1)])]),s("div",as,[s("div",ds,[t[6]||(t[6]=s("div",{class:"box-title"},"Customer",-1)),s("div",ls,o(((k=e.order.customer)==null?void 0:k.name)||"Walk-in customer"),1),(w=e.order.customer)!=null&&w.phone?(a(),d("div",rs,"Phone: "+o(e.order.customer.phone),1)):l("",!0),(g=e.order.customer)!=null&&g.email?(a(),d("div",cs,"Email: "+o(e.order.customer.email),1)):l("",!0)]),s("div",us,[t[10]||(t[10]=s("div",{class:"box-title"},"Order Info",-1)),s("div",ms,[t[7]||(t[7]=m("Branch: ")),s("span",vs,o(((I=e.order.branch)==null?void 0:I.name)||"—"),1)]),s("div",hs,[t[8]||(t[8]=m("Warehouse: ")),s("span",ps,o(((D=e.order.warehouse)==null?void 0:D.name)||"—"),1)]),s("div",_s,[t[9]||(t[9]=m("Status: ")),s("span",bs,o(e.order.status),1)])])]),s("div",xs,[s("table",ys,[t[11]||(t[11]=s("thead",null,[s("tr",null,[s("th",null,"Item"),s("th",{class:"r"},"Qty"),s("th",{class:"r"},"Unit"),s("th",{class:"r"},"Disc"),s("th",{class:"r"},"Tax"),s("th",{class:"r"},"Total")])],-1)),s("tbody",null,[(a(!0),d(p,null,_(e.order.items,n=>(a(),d("tr",{key:n.id},[s("td",null,[s("div",fs,o(n.name),1),s("div",ks,o(n.sku),1)]),s("td",ws,o(n.quantity),1),s("td",gs,o(i(n.unit_price)),1),s("td",Is,o(i(n.discount_amount||0)),1),s("td",Ds,o(i(n.tax_amount||0)),1),s("td",Ns,o(i(n.line_total||0)),1)]))),128))])])]),s("div",Ps,[t[12]||(t[12]=s("div",{class:"print-row-head"},[s("span",null,"Item"),s("span",{class:"r"},"Amt")],-1)),t[13]||(t[13]=s("div",{class:"print-sep"},null,-1)),(a(!0),d(p,null,_(e.order.items,n=>(a(),d("div",{key:n.id,class:"print-item"},[s("div",Ss,[s("div",Ts,o(n.name),1),s("div",Bs,o(i(n.line_total||0)),1)]),s("div",Cs,[s("span",null,o(n.sku),1),s("span",As,o(n.quantity)+" x "+o(i(n.unit_price)),1)])]))),128)),t[14]||(t[14]=s("div",{class:"print-sep"},null,-1))]),s("div",Fs,[s("div",Ls,[s("div",Ms,[t[15]||(t[15]=s("span",null,"Subtotal",-1)),s("span",Os,o(i(e.order.subtotal||0)),1)]),s("div",$s,[t[16]||(t[16]=s("span",null,"Discount",-1)),s("span",Vs,"-"+o(i(e.order.discount_amount||0)),1)]),s("div",Ws,[t[17]||(t[17]=s("span",null,"Tax",-1)),s("span",qs,o(i(e.order.tax_amount||0)),1)]),t[22]||(t[22]=s("div",{class:"tot-sep"},null,-1)),s("div",Rs,[t[18]||(t[18]=s("span",null,"Total",-1)),s("span",js,o(i(e.order.total_amount||0)),1)]),s("div",zs,[t[19]||(t[19]=s("span",null,"Paid",-1)),s("span",Es,o(i(v.value)),1)]),x.value>0?(a(),d("div",Us,[t[20]||(t[20]=s("span",null,"Change",-1)),s("span",Ys,o(i(x.value)),1)])):l("",!0),b.value>0?(a(),d("div",Qs,[t[21]||(t[21]=s("span",null,"Due",-1)),s("span",Gs,o(i(b.value)),1)])):l("",!0)])]),(N=e.order.payments)!=null&&N.length?(a(),d("div",Hs,[t[23]||(t[23]=s("div",{class:"payments-title"},"Payments",-1)),s("div",Js,[(a(!0),d(p,null,_(e.order.payments,n=>{var P;return a(),d("div",{key:n.id,class:"pay-row"},[s("span",null,o(((P=n.paymentMethod)==null?void 0:P.name)||"Method"),1),s("span",Ks,o(i(n.amount||0)),1)])}),128))])])):l("",!0),t[24]||(t[24]=s("div",{class:"print-footer hidden print:block"},[s("div",{class:"print-sep"}),s("div",{class:"print-thanks"},"Thank you for your purchase!"),s("div",{class:"print-small"},"Powered by POS")],-1))])])]}),_:1}))}},ut=W(Xs,[["__scopeId","data-v-7116f9e5"]]);export{ut as default};
