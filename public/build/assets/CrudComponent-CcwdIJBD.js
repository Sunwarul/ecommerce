import{s as Ye}from"./index-DEAX7Q1Y.js";import{a as Ke,s as He}from"./index-Czo10koq.js";import{c as Xe,d as Je}from"./index-BpCuBuyp.js";import{s as Qe}from"./index-epzkeV3O.js";import{s as _e}from"./index-dySuYGkv.js";import{B as Ne,c as Le,o as x,b as h,D as B,m as M,W as O,ax as V,ay as Ze,N as Q,M as et,L as tt,r as w,aq as rt,f as nt,g as T,w as p,a as y,d as $,K as Z,u as U,R as ye,F as he,a4 as ee,t as ke,E as at,a1 as ot,a2 as lt}from"./app-D6VZwh9m.js";import{a as it}from"./index-B6Pde6JK.js";import{_ as st}from"./AuthenticatedLayout-DT9N2QIJ.js";import{r as ut}from"./imageHelper-BscTlunE.js";var ct=function(r){var o=r.dt;return`
.p-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    padding: `.concat(o("toolbar.padding"),`;
    background: `).concat(o("toolbar.background"),`;
    border: 1px solid `).concat(o("toolbar.border.color"),`;
    color: `).concat(o("toolbar.color"),`;
    border-radius: `).concat(o("toolbar.border.radius"),`;
    gap: `).concat(o("toolbar.gap"),`;
}

.p-toolbar-start,
.p-toolbar-center,
.p-toolbar-end {
    display: flex;
    align-items: center;
}
`)},dt={root:"p-toolbar p-component",start:"p-toolbar-start",center:"p-toolbar-center",end:"p-toolbar-end"},ft=Ne.extend({name:"toolbar",theme:ct,classes:dt}),mt={name:"BaseToolbar",extends:_e,props:{ariaLabelledby:{type:String,default:null}},style:ft,provide:function(){return{$pcToolbar:this,$parentInstance:this}}},Be={name:"Toolbar",extends:mt,inheritAttrs:!1},vt=["aria-labelledby"];function pt(e,r,o,s,m,n){return x(),Le("div",M({class:e.cx("root"),role:"toolbar","aria-labelledby":e.ariaLabelledby},e.ptmi("root")),[h("div",M({class:e.cx("start")},e.ptm("start")),[B(e.$slots,"start")],16),h("div",M({class:e.cx("center")},e.ptm("center")),[B(e.$slots,"center")],16),h("div",M({class:e.cx("end")},e.ptm("end")),[B(e.$slots,"end")],16)],16,vt)}Be.render=pt;var bt=function(r){return r.dt,`
.p-buttongroup {
    display: inline-flex;
}

.p-buttongroup .p-button {
    margin: 0;
}

.p-buttongroup .p-button:not(:last-child),
.p-buttongroup .p-button:not(:last-child):hover {
    border-inline-end: 0 none;
}

.p-buttongroup .p-button:not(:first-of-type):not(:last-of-type) {
    border-radius: 0;
}

.p-buttongroup .p-button:first-of-type:not(:only-of-type) {
    border-start-end-radius: 0;
    border-end-end-radius: 0;
}

.p-buttongroup .p-button:last-of-type:not(:only-of-type) {
    border-start-start-radius: 0;
    border-end-start-radius: 0;
}

.p-buttongroup .p-button:focus {
    position: relative;
    z-index: 1;
}
`},gt={root:"p-buttongroup p-component"},yt=Ne.extend({name:"buttongroup",theme:bt,classes:gt}),ht={name:"BaseButtonGroup",extends:_e,style:yt,provide:function(){return{$pcButtonGroup:this,$parentInstance:this}}},Ge={name:"ButtonGroup",extends:ht,inheritAttrs:!1};function kt(e,r,o,s,m,n){return x(),Le("span",M({class:e.cx("root"),role:"group"},e.ptmi("root")),[B(e.$slots,"default")],16)}Ge.render=kt;const St=(e,r,o)=>{const s=e.first/e.rows+1;O.get(r,{page:s,per_page:e.rows},{preserveState:!0,preserveScroll:!0,only:["items"]})};var te,Se;function Ae(){if(Se)return te;Se=1;function e(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}return te=e,te}var re,xe;function xt(){if(xe)return re;xe=1;var e=typeof V=="object"&&V&&V.Object===Object&&V;return re=e,re}var ne,Re;function Ue(){if(Re)return ne;Re=1;var e=xt(),r=typeof self=="object"&&self&&self.Object===Object&&self,o=e||r||Function("return this")();return ne=o,ne}var ae,Te;function Rt(){if(Te)return ae;Te=1;var e=Ue(),r=function(){return e.Date.now()};return ae=r,ae}var oe,Ie;function Tt(){if(Ie)return oe;Ie=1;var e=/\s/;function r(o){for(var s=o.length;s--&&e.test(o.charAt(s)););return s}return oe=r,oe}var le,$e;function It(){if($e)return le;$e=1;var e=Tt(),r=/^\s+/;function o(s){return s&&s.slice(0,e(s)+1).replace(r,"")}return le=o,le}var ie,we;function Fe(){if(we)return ie;we=1;var e=Ue(),r=e.Symbol;return ie=r,ie}var se,je;function $t(){if(je)return se;je=1;var e=Fe(),r=Object.prototype,o=r.hasOwnProperty,s=r.toString,m=e?e.toStringTag:void 0;function n(u){var k=o.call(u,m),b=u[m];try{u[m]=void 0;var a=!0}catch{}var g=s.call(u);return a&&(k?u[m]=b:delete u[m]),g}return se=n,se}var ue,Ce;function wt(){if(Ce)return ue;Ce=1;var e=Object.prototype,r=e.toString;function o(s){return r.call(s)}return ue=o,ue}var ce,Ee;function jt(){if(Ee)return ce;Ee=1;var e=Fe(),r=$t(),o=wt(),s="[object Null]",m="[object Undefined]",n=e?e.toStringTag:void 0;function u(k){return k==null?k===void 0?m:s:n&&n in Object(k)?r(k):o(k)}return ce=u,ce}var de,De;function Ct(){if(De)return de;De=1;function e(r){return r!=null&&typeof r=="object"}return de=e,de}var fe,Oe;function Et(){if(Oe)return fe;Oe=1;var e=jt(),r=Ct(),o="[object Symbol]";function s(m){return typeof m=="symbol"||r(m)&&e(m)==o}return fe=s,fe}var me,Pe;function Dt(){if(Pe)return me;Pe=1;var e=It(),r=Ae(),o=Et(),s=NaN,m=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,u=/^0o[0-7]+$/i,k=parseInt;function b(a){if(typeof a=="number")return a;if(o(a))return s;if(r(a)){var g=typeof a.valueOf=="function"?a.valueOf():a;a=r(g)?g+"":g}if(typeof a!="string")return a===0?a:+a;a=e(a);var S=n.test(a);return S||u.test(a)?k(a.slice(2),S?2:8):m.test(a)?s:+a}return me=b,me}var ve,qe;function Ot(){if(qe)return ve;qe=1;var e=Ae(),r=Rt(),o=Dt(),s="Expected a function",m=Math.max,n=Math.min;function u(k,b,a){var g,S,v,R,f,C,_=0,G=!1,P=!1,E=!0;if(typeof k!="function")throw new TypeError(s);b=o(b)||0,e(a)&&(G=!!a.leading,P="maxWait"in a,v=P?m(o(a.maxWait)||0,b):v,E="trailing"in a?!!a.trailing:E);function q(d){var j=g,N=S;return g=S=void 0,_=d,R=k.apply(N,j),R}function Y(d){return _=d,f=setTimeout(A,b),G?q(d):R}function K(d){var j=d-C,N=d-_,I=b-j;return P?n(I,v-N):I}function W(d){var j=d-C,N=d-_;return C===void 0||j>=b||j<0||P&&N>=v}function A(){var d=r();if(W(d))return z(d);f=setTimeout(A,K(d))}function z(d){return f=void 0,E&&g?q(d):(g=S=void 0,R)}function H(){f!==void 0&&clearTimeout(f),_=0,g=C=S=f=void 0}function X(){return f===void 0?R:z(r())}function F(){var d=r(),j=W(d);if(g=arguments,S=this,C=d,j){if(f===void 0)return Y(C);if(P)return clearTimeout(f),f=setTimeout(A,b),q(C)}return f===void 0&&(f=setTimeout(A,b)),R}return F.cancel=H,F.flush=X,F}return ve=u,ve}var Pt=Ot();const qt=Ze(Pt),_t=[{label:"Active",value:1},{label:"Inactive",value:0}],Nt={class:"card"},Lt={class:"p-4 text-center"},Bt={class:"text-lg"},Gt={class:"flex flex-wrap gap-2 items-center justify-between"},At={class:"text-3xl"},Ut={class:"mt-3"},Jt={__name:"CrudComponent",props:["form","formWidth","canEdit","canDelete"],emits:["editingItem"],setup(e,{emit:r}){const o=Q(()=>e.canDelete===!1),s=Q(()=>e.canEdit===!1),m=et(),n=Q(()=>m.props),u=tt(),k=w(),b=w(!1),a=w(!1),g=w(!1),S=w(!1),v=w(),R=w({global:{value:null,matchMode:rt.CONTAINS}}),f=w(null),C=i=>{const t=i.files[0];e.form.photo=t;const l=new FileReader;l.onload=async D=>{f.value=D.target.result},l.readAsDataURL(t)},_=()=>{E.value=!1,e.form.reset(),a.value=!1,b.value=!0,f.value=null},G=()=>{b.value=!1,a.value=!1},P=(i=!1)=>{a.value=!0,e.form.ids&&(e.form.ids=e.form.ids.map(t=>t.id)),e.form.post(n.value.config.storeRoute,{onSuccess:()=>{if(e.form.reset(),f.value=null,u.add({severity:"success",summary:"Successful",detail:"Successfully Created!",life:3e3}),i){a.value=!1;return}else G()},onError:t=>{Object.entries(t).forEach((l,D)=>{u.add({severity:"error",summary:"Validation Error",detail:l[1],life:3e3})})}})},E=w(!1),q=w(null),Y=()=>{a.value=!0;const i=n.value.config.updateRoute.replace("__ID__",q.value);e.form.ids&&(e.form.ids=e.form.ids.map(l=>l.id));const t={_method:"put",...e.form};O.post(i,t,{onSuccess:()=>{G(),f.value=null,e.form.reset(),u.add({severity:"success",summary:"Successful",detail:"Successfully Updated!",life:3e3})},onError:l=>{Object.entries(l).forEach((D,pe)=>{u.add({severity:"error",summary:"Validation Error",detail:D[1],life:3e3})})}})},K=r,W=i=>{K("editingItem",i),b.value=!0,E.value=!0,f.value=null,Object.assign(e.form,i),q.value=i.id},A=i=>{g.value=!0,f.value=null,Object.assign(e.form,i),q.value=i.id},z=()=>{const i=v.value.map(t=>t.id);v.value=null,O.post(n.value.config.bulkRestoreRoute,{ids:i},{onSuccess:()=>{I.value=!1,O.get(n.value.config.indexRoute),u.add({severity:"success",summary:"Restored",detail:"Selected Items Restored!",life:3e3})},onError:t=>{Object.entries(t).forEach((l,D)=>{u.add({severity:"error",summary:"Restore Error",detail:l[1],life:3e3})})}})},H=()=>{const i=v.value.map(t=>t.id);v.value=null,O.post(n.value.config.bulkForceDeleteRoute,{ids:i},{onSuccess:()=>{I.value=!1,O.get(n.value.config.indexRoute),u.add({severity:"warn",summary:"Permanently Delete",detail:"Items Permanently Deleted!",life:3e3})},onError:t=>{Object.entries(t).forEach((l,D)=>{u.add({severity:"error",summary:"Permanent Delete Error",detail:l[1],life:3e3})})}})},X=()=>{g.value=!1;const i=n.value.config.deleteRoute.replace("__ID__",q.value);O.delete(i,{onSuccess:()=>{u.add({severity:"error",summary:"Deleted",detail:"Successfully Deleted",life:3e3})}})},F=()=>{const i=new URLSearchParams({search:R.value.global.value||""}).toString(),t=document.createElement("a");t.href=`${n.value.config.exportRoute}?${i}`,t.setAttribute("download",""),document.body.appendChild(t),t.click(),document.body.removeChild(t),u.add({severity:"success",summary:"Export Started",detail:"Your export will download shortly.",life:3e3})},d=()=>{S.value=!0},j=()=>{const i=v.value.map(t=>t.id);S.value=!1,v.value=null,O.post(n.value.config.bulkDeleteRoute,{ids:i},{onSuccess:()=>{u.add({severity:"error",summary:"Deleted",detail:"Selected Items Deleted",life:3e3})},onError:t=>{Object.entries(t).forEach((l,D)=>{u.add({severity:"error",summary:"Delete Error",detail:l[1],life:3e3})})}})},N=qt(i=>{var t;R.value.global.value=i.target.value,O.get(n.value.config.indexRoute,{search:i.target.value,per_page:(t=k.value)==null?void 0:t.rows},{preserveState:!0,preserveScroll:!0,only:["items"]})},300);nt(()=>{n.value.filters.search&&(R.value.global.value=n.value.filters.search)});const I=w(route().params.trashed==="1");return(i,t)=>{const l=it,D=Ge,pe=Be,Me=Je,We=Qe,ze=Xe,be=He,Ve=Ke,J=Ye;return x(),T(st,null,{default:p(()=>[h("div",Nt,[y(pe,{class:""},{start:p(()=>{var c,L,ge;return[y(l,{label:"Create New",icon:"pi pi-plus",class:"mr-5",onClick:_,outlined:"",severity:"primary"}),y(D,{class:"mr-2"},{default:p(()=>[n.value.config.indexRoute?(x(),T(U(ye),{key:0,href:n.value.config.indexRoute},{default:p(()=>[y(l,{label:"All Items",icon:"pi pi-list",class:he({"border-bottom-2":!I.value}),text:""},null,8,["class"])]),_:1},8,["href"])):$("",!0),n.value.config.bulkRestoreRoute?(x(),T(U(ye),{key:1,href:n.value.config.indexRouteTrashed},{default:p(()=>[y(l,{label:"Trashed",icon:"pi pi-ban",class:he({"border-bottom-2":I.value}),text:""},null,8,["class"])]),_:1},8,["href"])):$("",!0)]),_:1}),n.value.config.bulkRestoreRoute?Z((x(),T(l,{key:0,label:"Bulk Delete",icon:"pi pi-trash",class:"mr-2",severity:"danger",outlined:"",onClick:d},null,512)),[[ee,!(!v.value||!((c=v.value)!=null&&c.length))&&!I.value]]):$("",!0),n.value.config.bulkRestoreRoute?Z((x(),T(l,{key:1,label:"Bulk Restore",icon:"pi pi-undo",class:"mr-2",severity:"warn",outlined:"",onClick:z},null,512)),[[ee,!(!v.value||!((L=v.value)!=null&&L.length))&&I.value]]):$("",!0),n.value.config.bulkRestoreRoute?Z((x(),T(l,{key:2,label:"Force Delete",icon:"pi pi-trash",class:"mr-2",severity:"danger",outlined:"",onClick:H},null,512)),[[ee,!(!v.value||!((ge=v.value)!=null&&ge.length))&&I.value]]):$("",!0)]}),center:p(()=>[B(i.$slots,"messages")]),end:p(()=>{var c,L;return[(L=(c=n.value)==null?void 0:c.config)!=null&&L.exportRoute?(x(),T(l,{key:0,label:"Export",class:"mx-2",icon:"pi pi-upload",severity:"secondary",onClick:F})):$("",!0)]}),_:3}),y(Ve,{ref_key:"dt",ref:k,selection:v.value,"onUpdate:selection":t[1]||(t[1]=c=>v.value=c),value:n.value.items.data,dataKey:"id",paginator:!0,rows:15,filters:R.value,totalRecords:n.value.items.total,lazy:!0,onPage:t[2]||(t[2]=c=>U(St)(c,n.value.config.indexRoute,n.value.config.resource)),paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:`Showing {first} to {last} of {totalRecords} ${n.value.config.resource}`,resizableColumns:"",columnResizeMode:"fit"},{empty:p(()=>[h("div",Lt,[h("p",Bt,"No "+ke(n.value.config.resource)+" found.",1)])]),header:p(()=>[h("div",Gt,[h("h1",At,ke(n.value.config.title),1),y(ze,null,{default:p(()=>[y(Me,null,{default:p(()=>t[10]||(t[10]=[h("i",{class:"pi pi-search"},null,-1)])),_:1}),y(We,{modelValue:R.value.global.value,"onUpdate:modelValue":t[0]||(t[0]=c=>R.value.global.value=c),type:"search",onInput:U(N),placeholder:"Search...",clearable:""},null,8,["modelValue","onInput"])]),_:1})])]),default:p(()=>[n.value.config.bulkRestoreRoute?(x(),T(be,{key:0,selectionMode:"multiple",style:{width:"3rem"},exportable:!1,header:""})):$("",!0),B(i.$slots,"columns"),y(be,{exportable:!1,style:{"min-width":"12rem"}},{body:p(c=>[s.value?$("",!0):(x(),T(l,{key:0,icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:L=>W(c.data),disabled:I.value},null,8,["onClick","disabled"])),o.value?$("",!0):(x(),T(l,{key:1,icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:L=>A(c.data),disabled:I.value},null,8,["onClick","disabled"]))]),_:1})]),_:3},8,["selection","value","filters","totalRecords","currentPageReportTemplate"])]),y(J,{visible:b.value,"onUpdate:visible":t[5]||(t[5]=c=>b.value=c),maximizable:"",style:at({width:e.formWidth??"60vw"}),header:`${n.value.config.modelRaw} Details`,"pt:mask:class":"backdrop-blur-sm"},{footer:p(()=>[h("div",Ut,[y(l,{label:"Cancel",icon:"pi pi-times",text:"",onClick:G}),E.value?$("",!0):(x(),T(l,{key:0,label:"Save & Continue",text:"",icon:"pi pi-check",onClick:t[3]||(t[3]=c=>P(!0))})),E.value?$("",!0):(x(),T(l,{key:1,label:"Save",icon:"pi pi-check",onClick:t[4]||(t[4]=c=>P(!1))})),E.value?(x(),T(l,{key:2,label:"Update",icon:"pi pi-check",onClick:Y})):$("",!0)])]),default:p(()=>[B(i.$slots,"form",ot(lt({submitted:a.value,statuses:U(_t),handlePhotoUpload:C,photoPreview:f.value,resolveImagePath:U(ut)})))]),_:3},8,["visible","style","header"]),y(J,{visible:g.value,"onUpdate:visible":t[7]||(t[7]=c=>g.value=c),style:{width:"450px"},header:"Confirm Delete"},{footer:p(()=>[y(l,{label:"No",icon:"pi pi-times",text:"",onClick:t[6]||(t[6]=c=>g.value=!1)}),y(l,{label:"Yes",icon:"pi pi-check",onClick:X})]),default:p(()=>[t[11]||(t[11]=h("div",{class:"flex items-center gap-4"},[h("i",{class:"pi pi-exclamation-triangle !text-3xl"}),h("span",null,"Are you sure you want to delete?")],-1))]),_:1},8,["visible"]),y(J,{visible:S.value,"onUpdate:visible":t[9]||(t[9]=c=>S.value=c),style:{width:"450px"},header:"Confirm Delete"},{footer:p(()=>[y(l,{label:"No",icon:"pi pi-times",text:"",onClick:t[8]||(t[8]=c=>S.value=!1)}),y(l,{label:"Yes",icon:"pi pi-check",text:"",onClick:j})]),default:p(()=>[t[12]||(t[12]=h("div",{class:"flex items-center gap-4"},[h("i",{class:"pi pi-exclamation-triangle !text-3xl"}),h("span",null,"Are you sure you want to delete the selected items?")],-1))]),_:1},8,["visible"])]),_:3})}}};export{Jt as _};
