import{_ as I}from"./AuthenticatedLayout-DT9N2QIJ.js";import{N as m,f as _,g as T,o as l,w as q,b as s,a as x,u as v,W as M,c as i,d,t as o,G as P,H as C}from"./app-D6VZwh9m.js";import{a as S}from"./index-B6Pde6JK.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-n8HDM0GN.js";import"./index-dySuYGkv.js";import"./index-BkgCVwsV.js";import"./index-DCyjV8R-.js";import"./index-DHpg9Iw7.js";import"./index-Bm_3Bs0b.js";import"./index-Bullbt4E.js";import"./FavIcons-BO6-abF3.js";const F={class:"invoice-wrap"},L={class:"actions print:hidden"},O={class:"invoice"},V={key:0,class:"watermark"},W={class:"center"},$={class:"shop-name"},j={class:"small"},R={class:"small"},E={class:"meta"},G={key:0,class:"small"},H={key:1,class:"small"},U={class:"row"},Y={class:"bold"},z={class:"r bold"},J={class:"row small"},K={class:"r"},Q={class:"row"},X={class:"r"},Z={class:"row"},ss={class:"r neg"},ts={class:"row"},os={class:"r"},es={class:"row big"},ns={class:"r"},ls={class:"row"},as={class:"r"},is={key:1,class:"row"},rs={class:"r"},ds={key:2,class:"row"},us={class:"r due"},ms={key:3},cs={class:"r"},vs={__name:"Invoice copy 2",props:{order:{type:Object,required:!0},shop:{type:Object,default:()=>({name:"Your Shop Name",address:"Shop address line",phone:"0123456789"})}},setup(e){const u=e,a=r=>Number(r||0).toFixed(2),B=m(()=>(u.order.payments||[]).reduce((r,t)=>r+Number(t.amount||0),0)),c=m(()=>Number(u.order.paid_amount??B.value)),p=m(()=>Math.max(0,Number(u.order.total_amount||0)-c.value)),w=m(()=>Math.max(0,c.value-Number(u.order.total_amount||0)));function D(){window.print()}return _(()=>{new URLSearchParams(window.location.search).get("autoprint")==="1"&&setTimeout(()=>window.print(),300)}),(r,t)=>(l(),T(I,null,{default:q(()=>{var y,h,b,k,f,g;return[s("div",F,[s("div",L,[x(v(S),{label:"Back",icon:"pi pi-arrow-left",severity:"secondary",onClick:t[0]||(t[0]=n=>v(M).visit(r.route("pos.orders.index")))}),x(v(S),{label:"Print",icon:"pi pi-print",severity:"success",onClick:D})]),s("div",O,[e.order.status==="draft"?(l(),i("div",V,"DRAFT")):d("",!0),s("div",W,[s("div",$,o(e.shop.name),1),s("div",j,o(e.shop.address),1),s("div",R,"Phone: "+o(e.shop.phone),1)]),t[11]||(t[11]=s("div",{class:"sep"},null,-1)),s("div",E,[s("div",null,"Invoice: "+o(e.order.invoice_no||`#${e.order.id}`),1),s("div",null,"Date: "+o(new Date(e.order.created_at).toLocaleString()),1),s("div",null,"Cashier: "+o(((y=e.order.user)==null?void 0:y.name)||"—"),1),s("div",null,"Branch: "+o(((h=e.order.branch)==null?void 0:h.name)||"—"),1)]),t[12]||(t[12]=s("div",{class:"sep"},null,-1)),s("div",null,[t[1]||(t[1]=s("strong",null,"Customer",-1)),s("div",null,o(((b=e.order.customer)==null?void 0:b.name)||"Walk-in customer"),1),(k=e.order.customer)!=null&&k.phone?(l(),i("div",G,o(e.order.customer.phone),1)):d("",!0),(f=e.order.customer)!=null&&f.email?(l(),i("div",H,o(e.order.customer.email),1)):d("",!0)]),t[13]||(t[13]=s("div",{class:"sep"},null,-1)),t[14]||(t[14]=s("div",{class:"row head"},[s("span",null,"Item"),s("span",{class:"r"},"Amt")],-1)),t[15]||(t[15]=s("div",{class:"sep thin"},null,-1)),(l(!0),i(P,null,C(e.order.items,n=>(l(),i("div",{key:n.id,class:"item"},[s("div",U,[s("span",Y,o(n.name),1),s("span",z,o(a(n.line_total)),1)]),s("div",J,[s("span",null,o(n.sku),1),s("span",K,o(n.quantity)+" × "+o(a(n.unit_price)),1)])]))),128)),t[16]||(t[16]=s("div",{class:"sep"},null,-1)),s("div",Q,[t[2]||(t[2]=s("span",null,"Subtotal",-1)),s("span",X,o(a(e.order.subtotal)),1)]),s("div",Z,[t[3]||(t[3]=s("span",null,"Discount",-1)),s("span",ss,"-"+o(a(e.order.discount_amount)),1)]),s("div",ts,[t[4]||(t[4]=s("span",null,"Tax",-1)),s("span",os,o(a(e.order.tax_amount)),1)]),t[17]||(t[17]=s("div",{class:"sep"},null,-1)),s("div",es,[t[5]||(t[5]=s("span",null,"Total",-1)),s("span",ns,o(a(e.order.total_amount)),1)]),s("div",ls,[t[6]||(t[6]=s("span",null,"Paid",-1)),s("span",as,o(a(c.value)),1)]),w.value>0?(l(),i("div",is,[t[7]||(t[7]=s("span",null,"Change",-1)),s("span",rs,o(a(w.value)),1)])):d("",!0),p.value>0?(l(),i("div",ds,[t[8]||(t[8]=s("span",null,"Due",-1)),s("span",us,o(a(p.value)),1)])):d("",!0),(g=e.order.payments)!=null&&g.length?(l(),i("div",ms,[t[9]||(t[9]=s("div",{class:"sep"},null,-1)),t[10]||(t[10]=s("strong",null,"Payments",-1)),(l(!0),i(P,null,C(e.order.payments,n=>{var N;return l(),i("div",{key:n.id,class:"row small"},[s("span",null,o((N=n.paymentMethod)==null?void 0:N.name),1),s("span",cs,o(a(n.amount)),1)])}),128))])):d("",!0),t[18]||(t[18]=s("div",{class:"sep"},null,-1)),t[19]||(t[19]=s("div",{class:"center bold"},"Thank you!",-1)),t[20]||(t[20]=s("div",{class:"center small"},"Powered by POS",-1))])])]}),_:1}))}},Ss=A(vs,[["__scopeId","data-v-d5607008"]]);export{Ss as default};
