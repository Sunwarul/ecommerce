import{B as j,c as n,o as l,d as a,b as r,m as p,J as f,O as N,f as v,C as A,R as M,I as x,w as k,a as u,t as c,u as e,W as O,e as C}from"./app-B-_qiM2O.js";import{a as y}from"./index-ClBApoCN.js";import{s as E}from"./index-DwjWSNm_.js";import{s as b}from"./index-abn9Y2KC.js";import{s as F}from"./index-po1iam4k.js";import{s as I}from"./index-CFOhnWAd.js";import{s as L}from"./index-BFB_rKjv.js";import{s as P}from"./index-qkaHI2R7.js";import{_ as W}from"./AuthenticatedLayout-BqfRNi2u.js";import"./index-Dx3mN99j.js";import"./index-TosEN7lK.js";import"./index-Ch4YBmFi.js";import"./index-B8KsdCOI.js";import"./index-BVP9GjF8.js";import"./index-BWH0DLnf.js";import"./index-DLIcxrJX.js";import"./index-ixHmoZJY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./FavIcons-B-UgDdlO.js";var R=function(m){var i=m.dt;return`
.p-card {
    background: `.concat(i("card.background"),`;
    color: `).concat(i("card.color"),`;
    box-shadow: `).concat(i("card.shadow"),`;
    border-radius: `).concat(i("card.border.radius"),`;
    display: flex;
    flex-direction: column;
}

.p-card-caption {
    display: flex;
    flex-direction: column;
    gap: `).concat(i("card.caption.gap"),`;
}

.p-card-body {
    padding: `).concat(i("card.body.padding"),`;
    display: flex;
    flex-direction: column;
    gap: `).concat(i("card.body.gap"),`;
}

.p-card-title {
    font-size: `).concat(i("card.title.font.size"),`;
    font-weight: `).concat(i("card.title.font.weight"),`;
}

.p-card-subtitle {
    color: `).concat(i("card.subtitle.color"),`;
}
`)},z={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},Q=j.extend({name:"card",theme:R,classes:z}),D={name:"BaseCard",extends:E,style:Q,provide:function(){return{$pcCard:this,$parentInstance:this}}},q={name:"Card",extends:D,inheritAttrs:!1};function J(s,m,i,w,V,g){return l(),n("div",p({class:s.cx("root")},s.ptmi("root")),[s.$slots.header?(l(),n("div",p({key:0,class:s.cx("header")},s.ptm("header")),[f(s.$slots,"header")],16)):a("",!0),r("div",p({class:s.cx("body")},s.ptm("body")),[s.$slots.title||s.$slots.subtitle?(l(),n("div",p({key:0,class:s.cx("caption")},s.ptm("caption")),[s.$slots.title?(l(),n("div",p({key:0,class:s.cx("title")},s.ptm("title")),[f(s.$slots,"title")],16)):a("",!0),s.$slots.subtitle?(l(),n("div",p({key:1,class:s.cx("subtitle")},s.ptm("subtitle")),[f(s.$slots,"subtitle")],16)):a("",!0)],16)):a("",!0),r("div",p({class:s.cx("content")},s.ptm("content")),[f(s.$slots,"content")],16),s.$slots.footer?(l(),n("div",p({key:1,class:s.cx("footer")},s.ptm("footer")),[f(s.$slots,"footer")],16)):a("",!0)],16)],16)}q.render=J;const G={class:"space-y-4"},H={class:"flex items-center justify-between"},K={class:"text-sm text-gray-500"},X={class:"flex gap-2"},Y={class:"flex gap-2"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ee={key:0,class:"p-error"},oe={key:0},te={key:0,class:"p-error"},se={class:"block font-medium mb-2"},re={key:0,class:"text-xs text-gray-500"},le={key:0,class:"p-error"},ae={key:0,class:"p-error"},ne={key:1},ie={key:0,class:"p-error"},de={key:2},ue={key:0,class:"p-error"},ce={class:"md:col-span-2"},pe={key:0,class:"p-error"},me={class:"md:col-span-2"},fe={key:0,class:"p-error"},be={class:"mt-4"},ve={class:"flex justify-end gap-2 mt-5"},Oe={__name:"Move",props:{product:{type:Object,required:!0},warehouses:{type:Array,required:!0},branches:{type:Array,required:!0}},setup(s){const m=s,i=N(),w=[{label:"Stock IN",value:"in"},{label:"Stock OUT",value:"out"},{label:"Transfer",value:"transfer"},{label:"Adjust (Set Qty)",value:"adjust"}],V=v(()=>(m.product.variations||[]).map(t=>({label:t.sku||`Variation #${t.id}`,value:t.id}))),g=v(()=>m.product.type==="variable"),o=A({type:"in",product_id:m.product.id,variation_id:null,branch_id:null,quantity:null,from_warehouse_id:null,to_warehouse_id:null,reference:"",note:""}),_=v(()=>["out","transfer"].includes(o.type)),$=v(()=>["in","transfer","adjust"].includes(o.type));M(()=>o.type,()=>{_.value||(o.from_warehouse_id=null),$.value||(o.to_warehouse_id=null)});const B=()=>{o.quantity=null,o.reference="",o.note=""},T=()=>{o.post(route("admin.stock.move"),{preserveScroll:!0,onSuccess:()=>{i.add({severity:"success",summary:"Saved",detail:"Stock updated successfully.",life:2500}),B()},onError:()=>{i.add({severity:"error",summary:"Error",detail:"Please fix the errors.",life:3e3})}})},U=()=>{o.transform(h=>({...h,move:1})).post(route("admin.stock.move"),{preserveScroll:!0,onError:()=>{i.add({severity:"error",summary:"Error",detail:"Please fix the errors.",life:3e3})}})},S=()=>O.visit(route("products.show",m.product.id));return(h,t)=>(l(),x(W,null,{default:k(()=>[r("div",G,[r("div",H,[r("div",null,[t[8]||(t[8]=r("h2",{class:"text-xl font-semibold"},"Stock Movement",-1)),r("p",K,c(s.product.name)+" ("+c(s.product.type)+") ",1)]),r("div",X,[r("div",Y,[u(e(y),{label:"Back",icon:"pi pi-arrow-left",class:"p-button-text",onClick:S}),u(e(y),{label:"Save",icon:"pi pi-save",onClick:T,loading:e(o).processing},null,8,["loading"])])])]),u(e(q),null,{content:k(()=>[r("div",Z,[r("div",null,[t[9]||(t[9]=r("label",{class:"block font-medium mb-2"},"Movement Type *",-1)),u(e(b),{modelValue:e(o).type,"onUpdate:modelValue":t[0]||(t[0]=d=>e(o).type=d),options:w,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue"]),e(o).errors.type?(l(),n("small",ee,c(e(o).errors.type),1)):a("",!0)]),g.value?(l(),n("div",oe,[t[10]||(t[10]=r("label",{class:"block font-medium mb-2"},"Variation (optional)",-1)),u(e(b),{modelValue:e(o).variation_id,"onUpdate:modelValue":t[1]||(t[1]=d=>e(o).variation_id=d),options:V.value,optionLabel:"label",optionValue:"value",placeholder:"Select variation (or leave empty)",class:"w-full",showClear:""},null,8,["modelValue","options"]),e(o).errors.variation_id?(l(),n("small",te,c(e(o).errors.variation_id),1)):a("",!0),t[11]||(t[11]=r("small",{class:"text-gray-500 text-xs"}," If you select a variation, movement applies to that variation stock. ",-1))])):a("",!0),r("div",null,[r("label",se,[t[12]||(t[12]=C(" Quantity * ")),e(o).type==="adjust"?(l(),n("span",re,"(Set target qty)")):a("",!0)]),u(e(F),{modelValue:e(o).quantity,"onUpdate:modelValue":t[2]||(t[2]=d=>e(o).quantity=d),modelModifiers:{number:!0},class:"w-full",min:0},null,8,["modelValue"]),e(o).errors.quantity?(l(),n("small",le,c(e(o).errors.quantity),1)):a("",!0)]),r("div",null,[t[13]||(t[13]=r("label",{class:"block font-medium mb-2"},"Branch *",-1)),u(e(b),{modelValue:e(o).branch_id,"onUpdate:modelValue":t[3]||(t[3]=d=>e(o).branch_id=d),options:s.branches,optionLabel:"name",optionValue:"id",placeholder:"Select branch",class:"w-full"},null,8,["modelValue","options"]),e(o).errors.branch_id?(l(),n("small",ae,c(e(o).errors.branch_id),1)):a("",!0)]),_.value?(l(),n("div",ne,[t[14]||(t[14]=r("label",{class:"block font-medium mb-2"},"From Warehouse *",-1)),u(e(b),{modelValue:e(o).from_warehouse_id,"onUpdate:modelValue":t[4]||(t[4]=d=>e(o).from_warehouse_id=d),options:s.warehouses,optionLabel:"name",optionValue:"id",placeholder:"Select warehouse",class:"w-full"},null,8,["modelValue","options"]),e(o).errors.from_warehouse_id?(l(),n("small",ie,c(e(o).errors.from_warehouse_id),1)):a("",!0)])):a("",!0),$.value?(l(),n("div",de,[t[15]||(t[15]=r("label",{class:"block font-medium mb-2"},"To Warehouse *",-1)),u(e(b),{modelValue:e(o).to_warehouse_id,"onUpdate:modelValue":t[5]||(t[5]=d=>e(o).to_warehouse_id=d),options:s.warehouses,optionLabel:"name",optionValue:"id",placeholder:"Select warehouse",class:"w-full"},null,8,["modelValue","options"]),e(o).errors.to_warehouse_id?(l(),n("small",ue,c(e(o).errors.to_warehouse_id),1)):a("",!0)])):a("",!0),r("div",ce,[t[16]||(t[16]=r("label",{class:"block font-medium mb-2"},"Reference (optional)",-1)),u(e(I),{modelValue:e(o).reference,"onUpdate:modelValue":t[6]||(t[6]=d=>e(o).reference=d),class:"w-full",placeholder:"e.g. PO-102, INV-55, TRF-09"},null,8,["modelValue"]),e(o).errors.reference?(l(),n("small",pe,c(e(o).errors.reference),1)):a("",!0)]),r("div",me,[t[17]||(t[17]=r("label",{class:"block font-medium mb-2"},"Note (optional)",-1)),u(e(P),{modelValue:e(o).note,"onUpdate:modelValue":t[7]||(t[7]=d=>e(o).note=d),rows:"3",class:"w-full"},null,8,["modelValue"]),e(o).errors.note?(l(),n("small",fe,c(e(o).errors.note),1)):a("",!0)])]),r("div",be,[e(o).type==="transfer"&&e(o).from_warehouse_id&&e(o).to_warehouse_id&&e(o).from_warehouse_id===e(o).to_warehouse_id?(l(),x(e(L),{key:0,severity:"warn"},{default:k(()=>t[18]||(t[18]=[C(" From and To warehouse should not be the same. ")])),_:1})):a("",!0)]),r("div",ve,[u(e(y),{label:"Cancel",class:"p-button-text",onClick:S}),u(e(y),{label:"Save & Move",icon:"pi pi-check",class:"p-button-success",onClick:U,loading:e(o).processing},null,8,["loading"])])]),_:1})])]),_:1}))}};export{Oe as default};
