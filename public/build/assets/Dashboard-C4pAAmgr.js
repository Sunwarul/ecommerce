import{B,_ as D,c as l,o as d,b as t,m as k,n as V,f as T,r as L,g as I,a as x,u as j,h as F,w as A,e as p,t as i,d as v,F as b,i as w,P as M,j as R}from"./app-CfZqGFrz.js";import{s as q}from"./index-BV1P04VT.js";import{_ as Q}from"./AuthenticatedLayout-DJHnQnZa.js";import"./index-B5PF213O.js";import"./index-CdUENguR.js";import"./index-yTfERYif.js";import"./index-FvJsJ9Cf.js";import"./index-B2l2iXuO.js";import"./index-QPtwLXw7.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BP4g10d4.js";import"./FavIcons-BKI-ObOZ.js";var U={root:{position:"relative"}},K={root:"p-chart"},z=B.extend({name:"chart",classes:K,inlineStyles:U}),W={name:"BaseChart",extends:q,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:z,provide:function(){return{$pcChart:this,$parentInstance:this}}},E={name:"Chart",extends:W,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var r=this;D(()=>import("./auto-DMUjFWAU.js"),[]).then(function(o){r.chart&&(r.chart.destroy(),r.chart=null),o&&o.default&&(r.chart=new o.default(r.$refs.canvas,{type:r.type,data:r.data,options:r.options,plugins:r.plugins})),r.$emit("loaded",r.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(r){if(this.chart){var o=this.chart.getElementsAtEventForMode(r,"nearest",{intersect:!0},!1),n=this.chart.getElementsAtEventForMode(r,"dataset",{intersect:!0},!1);o&&o[0]&&n&&this.$emit("select",{originalEvent:r,element:o[0],dataset:n})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function h(e){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},h(e)}function N(e,r){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),o.push.apply(o,n)}return o}function $(e){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?N(Object(o),!0).forEach(function(n){G(e,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):N(Object(o)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))})}return e}function G(e,r,o){return(r=H(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}function H(e){var r=J(e,"string");return h(r)=="symbol"?r:r+""}function J(e,r){if(h(e)!="object"||!e)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var n=o.call(e,r);if(h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var X=["width","height"];function Y(e,r,o,n,m,g){return d(),l("div",k({class:e.cx("root"),style:e.sx("root")},e.ptmi("root")),[t("canvas",k({ref:"canvas",width:e.width,height:e.height,onClick:r[0]||(r[0]=function(f){return g.onCanvasClick(f)})},$($({},e.canvasProps),e.ptm("canvas"))),null,16,X)],16)}E.render=Y;const Z={class:"p-4"},tt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},et={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-100"},st={class:"flex justify-between items-start"},rt={class:"text-2xl font-bold text-gray-900 mt-1"},ot={class:"mt-4 text-sm text-gray-600"},at={class:"font-medium text-gray-900"},nt={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-100"},it={class:"flex justify-between items-start"},lt={class:"text-2xl font-bold text-gray-900 mt-1"},dt={class:"mt-4 text-sm text-gray-600"},ct={class:"font-medium text-gray-900"},ut={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-100"},pt={class:"flex justify-between items-start"},gt={class:"text-2xl font-bold text-gray-900 mt-1"},mt={class:"mt-4 text-sm text-gray-600"},yt={class:"font-medium text-gray-900"},ht={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-100"},xt={class:"flex justify-between items-start"},bt=["title"],ft={class:"mt-4 text-sm text-gray-600"},vt={class:"font-medium text-gray-900"},wt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},_t={class:"lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-gray-100"},Ot={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Pt={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-100"},Ct={class:"overflow-x-auto"},St={class:"w-full text-sm text-left"},kt={class:"px-4 py-3 font-medium text-gray-900"},jt={class:"px-4 py-3 text-right"},At={key:0},Nt={class:"flex flex-col gap-6"},$t={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-100"},Et={class:"overflow-x-auto"},Bt={class:"w-full text-sm text-left"},Dt={class:"px-4 py-3 font-medium text-gray-900"},Vt={class:"px-4 py-3 text-gray-500"},Tt={class:"px-4 py-3 text-right font-bold text-red-600"},Lt={key:0},It={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-100"},Ft={class:"overflow-x-auto"},Mt={class:"w-full text-sm text-left"},Rt={class:"px-4 py-3 font-medium text-gray-900"},qt={class:"px-4 py-3 text-right"},Qt={class:"px-4 py-3 text-center"},Ut={key:0},re={__name:"Dashboard",props:{stats:Object,chart:Object,top_products:Array,low_stock:Array,recent_orders:Array},setup(e){const r=V(),{currency:o,currency_symbol:n}=r.props.configs,m=e,g=c=>new Intl.NumberFormat("en-BD",{style:"currency",currency:o}).format(c||0),f=T(()=>{var s,u;const c=getComputedStyle(document.documentElement);return{labels:((s=m.chart)==null?void 0:s.labels)||[],datasets:[{label:"Sales (Amount)",backgroundColor:c.getPropertyValue("--p-primary-500")||"#6366f1",borderColor:c.getPropertyValue("--p-primary-500")||"#6366f1",data:((u=m.chart)==null?void 0:u.data)||[],fill:!1,tension:.4}]}}),_=L({});return I(()=>{const c=getComputedStyle(document.documentElement),s=c.getPropertyValue("--text-color")||"#374151",u=c.getPropertyValue("--text-color-secondary")||"#6b7280",y=c.getPropertyValue("--surface-border")||"#e5e7eb";_.value={maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:s}}},scales:{x:{ticks:{color:u},grid:{color:y}},y:{ticks:{color:u},grid:{color:y}}}}}),(c,s)=>{const u=E;return d(),l(b,null,[x(j(F),{title:"Dashboard"}),x(Q,null,{default:A(()=>{var y,O,P;return[t("div",Z,[s[23]||(s[23]=t("div",{class:"mb-6 flex flex-col md:flex-row items-start md:items-center justify-between gap-4"},[t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-800"},"Dashboard"),t("p",{class:"text-gray-500"},"Overview of your business performance.")]),t("div",{class:"flex gap-2"},[t("a",{href:"/admin/pos",target:"_blank",class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg shadow transition flex items-center gap-2"},[t("i",{class:"pi pi-desktop"}),p(" Open POS ")])])],-1)),t("div",tt,[t("div",et,[t("div",st,[t("div",null,[s[0]||(s[0]=t("p",{class:"text-sm font-medium text-gray-500"},"Today's Sales",-1)),t("h3",rt,i(g(e.stats.daily_sales)),1)]),s[1]||(s[1]=t("div",{class:"p-2 bg-green-100 rounded-lg"},[t("i",{class:"pi pi-dollar text-green-600 text-xl"})],-1))]),t("div",ot,[t("span",at,i(e.stats.daily_orders),1),s[2]||(s[2]=p(" Orders today "))])]),t("div",nt,[t("div",it,[t("div",null,[s[3]||(s[3]=t("p",{class:"text-sm font-medium text-gray-500"},"This Week",-1)),t("h3",lt,i(g(e.stats.weekly_sales)),1)]),s[4]||(s[4]=t("div",{class:"p-2 bg-blue-100 rounded-lg"},[t("i",{class:"pi pi-chart-line text-blue-600 text-xl"})],-1))]),t("div",dt,[t("span",ct,i(e.stats.weekly_orders),1),s[5]||(s[5]=p(" Orders this week "))])]),t("div",ut,[t("div",pt,[t("div",null,[s[6]||(s[6]=t("p",{class:"text-sm font-medium text-gray-500"},"This Month",-1)),t("h3",gt,i(g(e.stats.monthly_sales)),1)]),s[7]||(s[7]=t("div",{class:"p-2 bg-purple-100 rounded-lg"},[t("i",{class:"pi pi-calendar text-purple-600 text-xl"})],-1))]),t("div",mt,[t("span",yt,i(e.stats.monthly_orders),1),s[8]||(s[8]=p(" Orders this month "))])]),t("div",ht,[t("div",xt,[t("div",null,[s[9]||(s[9]=t("p",{class:"text-sm font-medium text-gray-500"},"Top Product",-1)),t("h3",{class:"text-lg font-bold text-gray-900 mt-1 truncate w-40",title:((y=e.top_products[0])==null?void 0:y.name)||"N/A"},i(((O=e.top_products[0])==null?void 0:O.name)||"N/A"),9,bt)]),s[10]||(s[10]=t("div",{class:"p-2 bg-orange-100 rounded-lg"},[t("i",{class:"pi pi-star text-orange-600 text-xl"})],-1))]),t("div",ft,[t("span",vt,i(((P=e.top_products[0])==null?void 0:P.total_qty)||0),1),s[11]||(s[11]=p(" Sold "))])])]),t("div",wt,[t("div",_t,[s[12]||(s[12]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Sales Overview (Last 7 Days)",-1)),x(u,{type:"bar",data:f.value,options:_.value,class:"h-[300px]"},null,8,["data","options"])]),s[13]||(s[13]=t("div",{class:"bg-white p-6 rounded-xl shadow-sm border border-gray-100"},[t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions"),t("div",{class:"grid grid-cols-1 gap-3"},[t("a",{href:"/admin/products/create",target:"_blank",class:"p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition flex items-center gap-3 group"},[t("div",{class:"p-2 bg-blue-100 text-blue-600 rounded-md group-hover:bg-blue-200"},[t("i",{class:"pi pi-plus"})]),t("span",{class:"font-medium text-gray-700"},"Add New Product")]),t("a",{href:"/admin/pos/orders",target:"_blank",class:"p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition flex items-center gap-3 group"},[t("div",{class:"p-2 bg-green-100 text-green-600 rounded-md group-hover:bg-green-200"},[t("i",{class:"pi pi-list"})]),t("span",{class:"font-medium text-gray-700"},"View Orders")]),t("a",{href:"/admin/customers/create",target:"_blank",class:"p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition flex items-center gap-3 group"},[t("div",{class:"p-2 bg-purple-100 text-purple-600 rounded-md group-hover:bg-purple-200"},[t("i",{class:"pi pi-user-plus"})]),t("span",{class:"font-medium text-gray-700"},"Add Customer")])])],-1))]),t("div",Ot,[t("div",Pt,[s[16]||(s[16]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Top Selling Products",-1)),t("div",Ct,[t("table",St,[s[15]||(s[15]=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Product Name"),t("th",{class:"px-4 py-3 text-right"},"Sold Qty")])],-1)),t("tbody",null,[(d(!0),l(b,null,w(e.top_products,a=>(d(),l("tr",{key:a.product_id,class:"border-b hover:bg-gray-50"},[t("td",kt,i(a.name),1),t("td",jt,i(a.total_qty),1)]))),128)),e.top_products.length===0?(d(),l("tr",At,s[14]||(s[14]=[t("td",{colspan:"2",class:"px-4 py-3 text-center text-gray-500"},"No sales yet",-1)]))):v("",!0)])])])]),t("div",Nt,[t("div",$t,[s[19]||(s[19]=t("div",{class:"flex items-center justify-between mb-4"},[t("h3",{class:"text-lg font-semibold text-red-600 flex items-center gap-2"},[t("i",{class:"pi pi-exclamation-triangle"}),p(" Low Stock Alert ")])],-1)),t("div",Et,[t("table",Bt,[s[18]||(s[18]=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Product"),t("th",{class:"px-4 py-3"},"Branch"),t("th",{class:"px-4 py-3 text-right"},"Qty")])],-1)),t("tbody",null,[(d(!0),l(b,null,w(e.low_stock,a=>{var C,S;return d(),l("tr",{key:a.id,class:"border-b hover:bg-gray-50"},[t("td",Dt,i(((C=a.product)==null?void 0:C.name)||"Unknown"),1),t("td",Vt,i(((S=a.branch)==null?void 0:S.name)||"-"),1),t("td",Tt,i(a.quantity),1)])}),128)),e.low_stock.length===0?(d(),l("tr",Lt,s[17]||(s[17]=[t("td",{colspan:"3",class:"px-4 py-3 text-center text-green-600"},"All stock levels normal",-1)]))):v("",!0)])])])]),t("div",It,[s[22]||(s[22]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Recent Orders",-1)),t("div",Ft,[t("table",Mt,[s[21]||(s[21]=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3"},"Order #"),t("th",{class:"px-4 py-3 text-right"},"Amount"),t("th",{class:"px-4 py-3 text-center"},"Status")])],-1)),t("tbody",null,[(d(!0),l(b,null,w(e.recent_orders,a=>(d(),l("tr",{key:a.id,class:"border-b hover:bg-gray-50"},[t("td",Rt,[x(j(M),{href:`/admin/pos-orders/${a.id}/invoice`,class:"text-indigo-600 hover:text-indigo-800"},{default:A(()=>[p(i(a.invoice_no||a.id),1)]),_:2},1032,["href"])]),t("td",qt,i(g(a.total_amount)),1),t("td",Qt,[t("span",{class:R(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800":a.status==="completed"||a.payment_status==="paid","bg-yellow-100 text-yellow-800":a.status==="pending","bg-red-100 text-red-800":a.status==="cancelled"}])},i(a.status||a.payment_status),3)])]))),128)),e.recent_orders.length===0?(d(),l("tr",Ut,s[20]||(s[20]=[t("td",{colspan:"3",class:"px-4 py-3 text-center text-gray-500"},"No recent orders ",-1)]))):v("",!0)])])])])])])])]}),_:1})],64)}}};export{re as default};
